(function(r,o,y,i,f,s,h,u){"use strict";var c={Delete:u.getAssetIDByName("ic_message_delete"),Edit:u.getAssetIDByName("ic_edit_24px")};const{FormRow:l,FormDivider:S,FormInput:I,FormSection:v}=h.Forms;function A(){return f.useProxy(s.storage),i.React.createElement(i.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},i.React.createElement(v,{title:"Authentication",titleStyleType:"no_border"},i.React.createElement(I,{title:"SentiraAI API Key",leading:i.React.createElement(l.Icon,{source:c.Edit}),placeholder:"Enter your SentiraAI API Key",value:s.storage.apiKey,onChange:function(e){s.storage.apiKey=e}}),i.React.createElement(S,null),i.React.createElement(l,{label:"Log out of SentiraAI",subLabel:"This will clear your API token.",leading:i.React.createElement(l.Icon,{source:c.Delete}),onPress:function(){return s.storage.apiKey=""}})))}function b(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function d(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,a,t){return a&&d(e.prototype,a),t&&d(e,t),e}function p(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}let w=function(){function e(a,t){b(this,e),p(this,"baseUrl",void 0),p(this,"apiKey",void 0),o.logger.info("SentiraAI API initialized"),this.baseUrl=a,this.apiKey=t}return T(e,[{key:"summarize",value:async function(a){o.logger.info("Summarize method called");const t=await fetch(`${this.baseUrl}/summarize`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey},body:JSON.stringify(a)});if(!t.ok)throw new Error(`Failed to summarize: ${t.statusText}`);const n=await t.json();return{result:n.result,creditsUsed:n.creditsUsed,tokensProcessed:n.tokensProcessed,response:{id:n.response.id,summary:n.response.summary}}}}]),e}(),g=[];const z=function(){o.logger.info("SentiraAI loaded"),o.logger.info("Registering commands"),g.push(y.registerCommand({name:"summarize",displayName:"Summarize",description:"Summarize text",displayDescription:"Summarize text",applicationId:"-1",inputType:1,type:1,options:[{name:"message",displayName:"Message to summarize",description:"Message to summarize",displayDescription:"Message to summarize",type:ApplicationCommandOptionType.STRING,required:!0},{name:"length",displayName:"Length of summary",description:"Length of summary",displayDescription:"Length of summary",type:ApplicationCommandOptionType.STRING,required:!1,choices:[{name:"Short",value:"short"},{name:"Medium",value:"medium"},{name:"Long",value:"long"}]},{name:"format",description:"Format of summary",type:ApplicationCommandOptionType.STRING,required:!1,choices:[{name:"Paragraph",value:"paragraph"},{name:"Bullets",value:"bullets"}]},{name:"model",description:"Model to use",type:ApplicationCommandOptionType.STRING,required:!0,choices:[{name:"Fast",value:"command-light"},{name:"Slow",value:"command"},{name:"Fast Nightly",value:"command-light-nightly"},{name:"Slow Nightly",value:"command-nightly"}]}],execute:async function(e,a){o.logger.info("SentiraAI summarize command executed");const t=e.message||"test",n=e.length||"medium",E=e.format||"paragraph",P=e.model||"command-light";new w("http://sentiraai.auna.li",o.storage.apiKey||"54321").summarize({userId:"123",text:t,summaryLength:n,summaryFormat:E,model:P}).then(function(m){console.log(m)}).catch(function(m){console.error(m)})}}))},R=function(){o.logger.info("SentiraAI unloaded");for(const e of g)e()},N=A;return r.onLoad=z,r.onUnload=R,r.settings=N,r})({},vendetta,vendetta.commands,vendetta.metro.common,vendetta.storage,vendetta.plugin,vendetta.ui.components,vendetta.ui.assets);
