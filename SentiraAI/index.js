(function(s,c,I,r,g,o,p,m){"use strict";var d;(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(d||(d={}));var i;(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(i||(i={}));var T;(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(T||(T={}));var f={Delete:m.getAssetIDByName("ic_message_delete"),Edit:m.getAssetIDByName("ic_edit_24px")};const{FormRow:l,FormDivider:A,FormInput:S,FormSection:R}=p.Forms;function v(){return g.useProxy(o.storage),r.React.createElement(r.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},r.React.createElement(R,{title:"Authentication",titleStyleType:"no_border"},r.React.createElement(S,{title:"SentiraAI API Key",leading:r.React.createElement(l.Icon,{source:f.Edit}),placeholder:"Enter your SentiraAI API Key",value:o.storage.authToken,onChange:function(e){o.storage.authToken=e}}),r.React.createElement(A,null),r.React.createElement(l,{label:"Log out of SentiraAI",subLabel:"This will clear your API token.",leading:r.React.createElement(l.Icon,{source:f.Delete}),disabled:o.storage.authToken.length===0,onPress:function(){return o.storage.authToken=""}})))}function _(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function h(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function O(e,n,t){return n&&h(e.prototype,n),t&&h(e,t),e}function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}let U=function(){function e(n,t){_(this,e),y(this,"baseUrl",void 0),y(this,"apiKey",void 0),this.baseUrl=n,this.apiKey=t}return O(e,[{key:"summarize",value:async function(n){const t=await fetch(`${this.baseUrl}/summarize`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey},body:JSON.stringify(n)});if(!t.ok)throw new Error(`Failed to summarize: ${t.statusText}`);const a=await t.json();return{result:a.result,creditsUsed:a.creditsUsed,tokensProcessed:a.tokensProcessed,response:{id:a.response.id,summary:a.response.summary}}}}]),e}();c.logger.info("SentiraAI loaded");let N=[];N.push(I.registerCommand({name:"summarize",description:"Summarize text",options:[{name:"message",description:"Message to summarize",type:i.STRING,required:!0},{name:"length",description:"Length of summary",type:i.STRING,required:!1,choices:[{name:"Short",value:"short"},{name:"Medium",value:"medium"},{name:"Long",value:"long"}]},{name:"format",description:"Format of summary",type:i.STRING,required:!1,choices:[{name:"Paragraph",value:"paragraph"},{name:"Bullets",value:"bullets"}]},{name:"model",description:"Model to use",type:i.STRING,required:!1,choices:[{name:"Fast",value:"command-light"},{name:"Slow",value:"command"},{name:"Fast Nightly",value:"command-light-nightly"},{name:"Slow Nightly",value:"command-nightly"}]}],execute:async function(e,n){const t=e[0],a=e[1],B=e[2],M=e[3];new U("http://sentiraai.auna.li",c.storage.authToken).summarize({userId:"123",text:t,summaryLength:a,summaryFormat:B,model:M}).then(function(u){console.log(u)}).catch(function(u){console.error(u)})}}));var L={onUnload:function(){for(const e of N)e()},Settings:v};return s.default=L,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta,vendetta.commands,vendetta.metro.common,vendetta.storage,vendetta.plugin,vendetta.ui.components,vendetta.ui.assets);
